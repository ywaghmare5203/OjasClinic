/*! Divas Slider jQuery plugin v1.2 2016.11.07 - jquery.divas-1.2.js by Federica Sibella (@musingspuntoit) and Michela Chiucini (@webislove) - Coding Divas (@CodingDivas) */
!function(i){function t(i){if("string"==typeof i){var t=i.indexOf("_");-1!=t&&(i=i.substr(t+1))}return i}function e(i,t){var e=t,a=0,n=0;if("string"==typeof i){var s=i.indexOf("%");-1!=s&&(a=parseInt(i.slice(0,-1))/100,n=Math.round(e*a))}else n=i;return n}function a(i){return i%2===0}function n(t){var e=i.Deferred(),a=new Image,n=this;return a.onload=function(){e.resolveWith(n,[a.width,a.height,a.src])},a.onerror=function(){e.rejectWith(n,[a.src])},e.fail(function(){console.log("image failed to load: "+a.src)}),a.src=t,e.promise()}function s(t,e,a,n){e.css3transition?""!==a.titleTransitionClass&&(t.addClass(a.titleTransitionClass+"-start"),t.addClass(a.titleTransitionClass)):""!==a.titleTransitionParameter&&""!==a.titleTransitionDuration&&null!==a.titleTransitionStartValue&&null!==a.titleTransitionStopValue&&(i.isArray(a.titleTransitionParameter)?i.each(a.titleTransitionParameter,function(i){n[a.titleTransitionParameter[i]]=a.titleTransitionStartValue[i]}):n[a.titleTransitionParameter]=a.titleTransitionStartValue,t.css(n))}function r(t,e,a,n){e.css3transition&&""!==a.titleTransitionClass?t.addClass(a.titleTransitionClass+"-stop").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){}):""!==a.titleTransitionParameter&&""!==a.titleTransitionDuration&&null!==a.titleTransitionStartValue&&null!==a.titleTransitionStopValue&&(i.isArray(a.titleTransitionParameter)?i.each(a.titleTransitionParameter,function(i){n[a.titleTransitionParameter[i]]=a.titleTransitionStopValue[i]}):n[a.titleTransitionParameter]=a.titleTransitionStopValue,t.animate(n,a.titleTransitionDuration,a.titleTransitionEasing,function(){}))}function o(t,e,a,n){e.css3transition&&""!==a.titleTransitionClass?t.removeClass(a.titleTransitionClass+"-stop"):""!==a.titleTransitionParameter&&""!==a.titleTransitionDuration&&null!==a.titleTransitionStartValue&&null!==a.titleTransitionStopValue&&(i.isArray(a.titleTransitionParameter)?i.each(a.titleTransitionParameter,function(i){n[a.titleTransitionParameter[i]]=a.titleTransitionStartValue[i]}):n[a.titleTransitionParameter]=a.titleTransitionStartValue,t.animate(n,a.titleTransitionDuration))}function d(i,t){var e=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0];return void 0===i.originalEvent.touches&&(e=i),t.ox=e.pageX,t.oy=e.pageY,t.startTime=(new Date).getTime(),t}function l(i,t){var e=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0];return void 0===i.originalEvent.touches&&(e=i),t.dx=e.pageX-t.ox,t.dy=e.pageY-t.oy,t.endTime=(new Date).getTime()-t.startTime,t}function c(t,e){var a=t.slider,n=t.container,s=t.slide,o=t.prev,c=t.next,v=t.current,u=t.settings,h=t.slide_width,f=t.timer,p=t.css3properties,m=t.titleTransitionParameters,g=t.mm,T=i();if("next"==e?(T=n.children(".divas-slide").first(),s.css({left:"+="+h}),n.append(T)):"prev"==e&&(T=n.children(".divas-slide").last(),s.css({left:"-="+h}),n.prepend(T)),s=n.children(".divas-slide"),s.removeClass("divas-active").eq(v).addClass("divas-active"),"yes"==u.bullets){var w=i(".divas-active").attr("data-position");i(".divas-bullet").removeClass("divas-bullet-current").eq(w).addClass("divas-bullet-current")}if(0!==s.eq(v).find(".divas-caption").length){var b=s.eq(v).find(".divas-caption");r(b,p,u,m)}return i.isFunction(u.afterSlide)&&u.afterSlide.call(a),o.length>0&&c.length>0&&0===f&&(o.on("click touchstart touchend",function(){i(this).divas("prev")}),c.on("click touchstart touchend",function(){i(this).divas("next")})),a.on("touchstart.divas",s.children("img"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img")&&(g=d(t,g))}),a.on("touchend.divas",s.children("img"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img")&&(g=l(t,g),(g.dx<-g.swipeTreshold||g.dy<-g.swipeTreshold)&&g.endTime<g.allowedTime?a.divas("next"):(g.dx>g.swipeTreshold||g.dy>g.swipeTreshold)&&g.endTime<g.allowedTime&&a.divas("prev"))}),t.current=v,t.slide=s,t.container=n,t.next=c,t.prev=o,t.slider=a,t}var v=[],u=0,h={init:function(t){var o={sliderWidth:"100%",mainImageWidth:"60%",start:"manual",slideInterval:4e3,slideTransitionClass:"",slideTransitionParameter:"",slideTransitionDuration:600,slideTransitionEasing:"swing",slideTransitionStartValue:null,slideTransitionStopValue:null,titleTransitionClass:"",titleTransitionParameter:"",titleTransitionDuration:1e3,titleTransitionEasing:"swing",titleTransitionStartValue:null,titleTransitionStopValue:null,startFrom:"center",imagesToPreload:3,bullets:"no",wingsOverlayColor:"",placeholderImg:"",onImageClick:function(){},beforeSlide:function(){},afterSlide:function(){}},c=i.extend({},o,t);this.each(function(){var t=i(this),h=t.data("divas"),f=0,p=0,m=0,g=0,T=0,w=i(),b=i(),C=i(),_=i(),y=i(),x=i(),P=i(),k=i(),I=i(),E=i(),S=i(),D={},W="images/backup_img.png",M="images/placeholder.gif",V={},z={},q={};D.swipeTreshold=30,D.allowedTime=1e3,z.start={},z.next={},z.prev={},t.attr("data-id","divas-slider_"+u),w=t.children(".divas-slide-container").attr("data-id","divas-slide-container_"+u),b=w.children(".divas-slide"),b.each(function(t){i(this).attr("data-position",t),i(this).attr("data-id","divas-slide-"+t+"_"+u)}),t.parent().append("<div id='loader'><div class='spin'></div></div>"),p=b.length,m=c.imagesToPreload,3>p&&alert("No Divas with less than 3 slides!\n Please add some slides"),(parseInt(c.sliderWidth)<=0||isNaN(parseInt(c.sliderWidth)))&&alert("No Divas if the slider width is not correctly set!\n Please change 'sliderWidth' value"),(parseInt(c.mainImageWidth)<=0||isNaN(parseInt(c.mainImageWidth)))&&alert("No Divas if the main image width is not correctly set!\n Please change 'mainImageWidth' value"),(3>m||"number"!=typeof m)&&(m=o.imagesToPreload),a(m)&&m++,m>p&&(m=p),""!==c.placeholderImg&&(M=c.placeholderImg);var A=e(c.sliderWidth,t.parent().width()),F=e(c.mainImageWidth,A),N=p*F,O=Math.round((A-F)/2);t.css({width:A,"box-sizing":"content-box"}),w.css({width:N,"box-sizing":"content-box"});var j=i();switch(c.startFrom){case"left":j=b.slice(0,m),f=1;break;case"center":var L=Math.floor(p/2);a(p)&&(L=p/2),f=L,j=b.slice(L-Math.floor(m/2),L+Math.ceil(m/2));break;case"right":j=b.slice(-m),f=p-2;break;default:j=b.slice(0,m),f=1}if(V=i.support.css3Properties,V.css3transition&&""!==c.slideTransitionClass){var H=["divas-slide-transition-left"];if(i.inArray(c.slideTransitionClass,H)>-1)switch(c.slideTransitionClass){case"divas-slide-transition-left":z.next.left="-="+F,z.prev.left="+="+F}else c.slideTransitionClass=""}if(i("img",j).each(function(e){var a=i(this),o=a.attr("data-src");if(o){var d=n(o);d.done(function(n,d){if(a.attr("src",o),0===e&&(h.img_ratio=d/n,v[u]=h,I.css("height",a.height()),E.css("height",a.height()),b.css("height",a.height()),t.divas("resize")),i.isFunction(c.onImageClick)&&a.on("click",c.onImageClick),0===a.parent().find(".divas-caption").length&&void 0!==a.attr("data-title")&&""!==a.attr("data-title")){a.parent().append("<div class='divas-caption'>"+a.attr("data-title")+"</div>");var l=a.parent().find(".divas-caption");s(l,V,c,q)}e==j.length-1&&(i("#loader").remove(),setTimeout(function(){if(0!==b.eq(f).find(".divas-caption").length){var i=b.eq(f).find(".divas-caption");r(i,V,c,q)}},200),b.eq(f).addClass("divas-active"))}),d.fail(function(){console.log("Image loading failed!"),d=n(W),d.done(function(){a.attr("src",W)})})}}),b.css({"box-sizing":"content-box",position:"relative","float":"left",width:F,margin:0,padding:0,left:O-F*f}),I=i("<div class='divas-wing'></div>").appendTo(t),I.css({position:"absolute",top:0,left:0,width:O,background:c.wingsOverlayColor}),E=I.clone().appendTo(t),E.css({right:0,left:"auto"}),t.children(".divas-navigation").length>0&&(C=t.children(".divas-navigation").attr("data-id","divas-navigation_"+u),C.children(".divas-prev").length>0&&C.children(".divas-next").length>0&&(y=C.children(".divas-prev").attr("data-id","divas-prev_"+u),x=C.children(".divas-next").attr("data-id","divas-next_"+u),y.on("click touchstart touchend",function(){i(this).divas("prev")}),x.on("click touchstart touchend",function(){i(this).divas("next")}))),t.children(".divas-controls").length>0&&(_=t.children(".divas-controls").attr("data-id","divas-controls_"+u),_.children(".divas-start").length>0&&_.children(".divas-stop").length>0&&(P=_.children(".divas-start").attr("data-id","divas-start_"+u),k=_.children(".divas-stop").attr("data-id","divas-stop_"+u),P.on("click touchstart touchend",function(){i(this).divas("start")}),k.on("click touchstart touchend",function(){i(this).divas("stop")}),k.addClass("disabled"))),t.on("touchstart.divas",b.children("img"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img")&&(D=d(t,D))}),t.on("touchend.divas",b.children("img"),function(e){e.stopPropagation(),e.preventDefault(),i(e.target).is("img")&&(D=l(e,D),(D.dx<-D.swipeTreshold||D.dy<-D.swipeTreshold)&&D.endTime<D.allowedTime?t.divas("next"):(D.dx>D.swipeTreshold||D.dy>D.swipeTreshold)&&D.endTime<D.allowedTime&&t.divas("prev"))}),"yes"==c.bullets){S=i("<div class='divas-bullets'><ul></ul></div>").appendTo(t);for(var Q=i("<li class='divas-bullet'></li>").appendTo(S.children("ul")),X=1;p>X;X++)Q.clone().appendTo(S.children("ul"));i(".divas-bullet").eq(f).addClass("divas-bullet-current"),i(".divas-bullet").each(function(t){i(this).attr("data-position",t)}),t.addClass("divas-has-bullets")}return t.data("divas",{settings:c,instance:u,tot_slides:p,current:f,timer:g,img_ratio:T,images_to_preload:m,backup_img:W,placeholder_img:M,css3properties:V,slider:t,container:w,slide:b,left_wing:I,right_wing:E,bullets_container:S,prev:y,next:x,start:P,stop:k,slide_width:F,slideTransitionParameters:z,titleTransitionParameters:q,mm:D}),h=t.data("divas"),v[u]=h,"auto"==c.start&&t.divas("start"),u++,v})},next:function(){var e=t(i(this).attr("data-id")),a=v[e],r=a.current,d=a.settings,l=a.slider,u=a.slide,h=r+Math.ceil(a.images_to_preload/2),f=a.next,p=a.prev,m=a.tot_slides,g=a.css3properties,T=a.slide_width,w=a.slideTransitionParameters,b=a.titleTransitionParameters;f.off(),p.off(),l.off("touchstart.divas"),l.off("touchend.divas");var C=u.find(".divas-caption");o(C,g,d,b),h>a.tot_slides-1&&(h-=a.tot_slides);var _=u.eq(h);if(_.find("img").attr("src")!=_.find("img").attr("data-src")){var y=_.find("img"),x=y.attr("data-src");if(x){var P=n(x);P.done(function(){if(y.attr("src",x),i.isFunction(d.onImageClick)&&y.on("click",d.onImageClick),0===y.parent().find(".divas-caption").length&&void 0!==y.attr("data-title")&&""!==y.attr("data-title")){y.parent().append("<div class='divas-caption'>"+y.attr("data-title")+"</div>");var t=y.parent().find(".divas-caption");s(t,g,d,b)}}),P.fail(function(){console.log("Image loading failed!"),P=n(a.backup_img),P.done(function(){y.attr("src",a.backup_img)})})}}i.isFunction(d.beforeSlide)&&d.beforeSlide.call(l);var k="next",I=1;g.css3transition&&""!==d.slideTransitionClass?u.addClass(d.slideTransitionClass).css(w.next).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return I==m?(I++,u.removeClass(d.slideTransitionClass),a=c(a,k),v[e]=a,v):void I++}):u.animate({left:"-="+T},d.slideTransitionDuration,d.slideTransitionEasing).promise().done(function(){return a=c(a,k),v[e]=a,v})},prev:function(){var e=t(i(this).attr("data-id")),a=v[e],r=a.current,d=a.settings,l=a.slider,u=a.slide,h=r-Math.ceil(a.images_to_preload/2),f=a.next,p=a.prev,m=a.tot_slides,g=a.css3properties,T=a.slide_width,w=a.slideTransitionParameters,b=a.titleTransitionParameters;f.off(),p.off(),l.off("touchstart.divas"),l.off("touchend.divas");var C=u.find(".divas-caption");o(C,g,d,b),0>h&&(h+=a.tot_slides);var _=u.eq(h);if(_.find("img").attr("src")!=_.find("img").attr("data-src")){var y=_.find("img"),x=y.attr("data-src");if(x){var P=n(x);P.done(function(){if(y.attr("src",x),i.isFunction(d.onImageClick)&&y.on("click",d.onImageClick),0===y.parent().find(".divas-caption").length&&void 0!==y.attr("data-title")&&""!==y.attr("data-title")){y.parent().append("<div class='divas-caption'>"+y.attr("data-title")+"</div>");var t=y.parent().find(".divas-caption");s(t,g,d,b)}}),P.fail(function(){console.log("Image loading failed!"),P=n(a.backup_img),P.done(function(){y.attr("src",a.backup_img)})})}}i.isFunction(d.beforeSlide)&&d.beforeSlide.call(l);var k="prev",I=1;g.css3transition&&""!==d.slideTransitionClass?u.addClass(d.slideTransitionClass).css(w.prev).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return I==m?(I++,u.removeClass(d.slideTransitionClass),a=c(a,k),v[e]=a,v):void I++}):u.animate({left:"+="+T},d.slideTransitionDuration,d.slideTransitionEasing).promise().done(function(){return a=c(a,k),v[e]=a,v})},start:function(){var e=t(i(this).attr("data-id")),a=v[e],n=a.slider,s=a.prev,r=a.next,o=a.start,d=a.stop,l=a.settings.slideInterval;return 0!==a.timer&&(clearInterval(a.timer),a.timer=0),s.off().addClass("disabled"),r.off().addClass("disabled"),o.off().addClass("disabled"),n.off("touchstart.divas"),n.off("touchend.divas"),d.length>0&&d.hasClass("disabled")&&d.on("click touchstart touchend",function(){i(this).divas("stop")}).removeClass("disabled"),a.timer=setInterval(function(){n.divas("next")},l),a.prev=s,a.next=r,a.start=o,a.stop=d,v[e]=a,v},stop:function(){var e=t(i(this).attr("data-id")),a=v[e],n=a.prev,s=a.next,r=a.start,o=a.stop,c=a.slider,u=a.slide,h=a.mm;return o.off().addClass("disabled"),n.length>0&&s.length>0&&0!==a.timer&&(n.on("click touchstart touchend",function(){i(this).divas("prev")}).removeClass("disabled"),s.on("click touchstart touchend",function(){i(this).divas("next")}).removeClass("disabled")),r.length>0&&r.on("click touchstart touchend",function(){i(this).divas("start")}).removeClass("disabled"),c.on("touchstart.divas",u.children("img"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img")&&(h=d(t,h))}),c.on("touchend.divas",u.children("img"),function(t){t.stopPropagation(),t.preventDefault(),i(t.target).is("img")&&(h=l(t,h),(h.dx<-h.swipeTreshold||h.dy<-h.swipeTreshold)&&h.endTime<h.allowedTime?c.divas("next"):(h.dx>h.swipeTreshold||h.dy>h.swipeTreshold)&&h.endTime<h.allowedTime&&c.divas("prev"))}),clearInterval(a.timer),a.timer=0,a.prev=n,a.next=s,a.start=r,a.stop=o,a.slider=c,v[e]=a,v},resize:function(a){"number"!=typeof a&&(a=t(i(this).attr("data-id")));var n=v[a];if(void 0!==n){var s=n.slider,r=n.slide,o=n.container,d=n.left_wing,l=n.right_wing,c=n.settings,u=n.css3properties,h=n.tot_slides,f=n.current,p=n.img_ratio,m=e(c.sliderWidth,s.parent().width()),g=e(c.mainImageWidth,m),T=h*g,w=Math.round((m-g)/2),b=Math.round(g*p),C=w-g*f,_=n.slideTransitionParameters;if(s.css({width:m}),o.css({width:T}),d.css({width:w,height:b}),l.css({width:w,height:b}),r.css({width:g,height:b,left:C}),u.css3transition&&""!==c.slideTransitionClass){var y=["divas-slide-transition-left"];if(i.inArray(c.slideTransitionClass,y)>-1)switch(c.slideTransitionClass){case"divas-slide-transition-left":_.next.left="-="+g,_.prev.left="+="+g}else c.slideTransitionClass=""}return n.slider=s,n.container=o,n.slide=r,n.left_wing=d,n.right_wing=l,n.slide_width=g,n.slideTransitionParameters=_,v[a]=n,v}},destroy:function(){var e=t(i(this).attr("data-id")),a=v[e];a.prev.off(),a.next.off(),a.slider.off("touchstart.divas"),a.slider.off("touchend.divas"),a.slider.divas("stop"),a.slider.removeClass("divas-has-bullets"),a.slide.find(".divas-caption").remove(),a.slide.children("img").attr("src",a.placeholder_img),i(".divas-slide").sort(function(t,e){return i(t).attr("data-position")-i(e).attr("data-position")}).each(function(t){i(t).parent().append(t)}),a.slide.removeClass("divas-active"),a.left_wing.remove(),a.right_wing.remove(),a.bullets_container.remove(),i.removeData(a,"divas"),this.unbind(),this.element=null},update:function(t){i(this).divas("destroy"),i(this).divas("init",t)}},f=function(){var i={};return function(t,e,a){a||(a="Don't call this twice without a uniqueId"),i[a]&&clearTimeout(i[a]),i[a]=setTimeout(t,e)}}();i(window).resize(function(){f(function(){for(var t=0;u>t;t++)i.fn.divas("resize",t)},100)}),i.support.css3Properties=function(){var i=document.body||document.documentElement,t=i.style,e={css3transition:!1,css3animation:!1,css3transform:!1};return e.css3transition=void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition,e.css3animation=void 0!==t.animation||void 0!==t.WebkitAnimation||void 0!==t.MozAnimation||void 0!==t.MsAnimation||void 0!==t.OAnimation,e.css3transform=void 0!==t.transform||void 0!==t.WebkitTransform||void 0!==t.MozTransform||void 0!==t.MsTransform||void 0!==t.OTransform,e}(),function(){function t(t){var a,n="visible",s="hidden",r={focus:n,focusin:n,pageshow:n,blur:s,focusout:s,pagehide:s};t=t||window.event,t.type in r?(i("body").removeClass().addClass(r[t.type]),a=r[t.type]):this[e]?(i("body").removeClass().addClass("hidden"),i(".divas-slider").each(function(){"auto"===i(this).data("divas").settings.start&&i(this).divas("stop")})):(i("body").removeClass().addClass("visible"),i(".divas-slider").each(function(){"auto"===i(this).data("divas").settings.start&&i(this).divas("start")}))}var e="hidden";e in document?document.addEventListener("visibilitychange",t):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(e="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t,t({type:"visible"==document.visibilityState?"focus":"blur"})}(),i.fn.divas=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void i.error("Method "+t+" does not exist on jQuery.divas"):h.init.apply(this,arguments)}}(jQuery);